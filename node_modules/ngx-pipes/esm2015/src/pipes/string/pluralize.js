/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Pipe } from "@angular/core";
import { isVowel } from "../helpers/helpers";
/**
 * Takes a singular entity string and pluralizes it.
 * Uses both naive and holdout-list approaches.
 * If several words appear in the string, only the last word is pluralized -- this
 * means that if "your story" was passed in, "your stories" would be passed out.
 * @constructor
 * @param {string} singularEntity - Entity to pluralize. Pass as a singular ('story' or 'house').
 *          NOTE: The last word is examined. So you can pass in e.g. 'my story'.
 * @param {number} [quantity=0] quantity - How many of the entity are there? If left blank, this will
 *          pluralize the string (e.g. 'story' -> 'stories', 'house' -> 'houses'). If given a value,
 *          this will pluralize appropriately (e.g. ('story', 1) -> 'story', ('story', 2) -> 'stories').
 */
export class MakePluralStringPipe {
    constructor() {
        this.irregularMap = {
            addendum: "addenda",
            alga: "algae",
            alumna: "alumnae",
            alumnus: "alumni",
            analysis: "analyses",
            antenna: "antennae",
            appendix: "appendices",
            aquarium: "aquaria",
            arch: "arches",
            axe: "axes",
            axis: "axes",
            bacillus: "bacilli",
            bacterium: "bacteria",
            basis: "bases",
            batch: "batches",
            beach: "beaches",
            beau: "beaux",
            bison: "bison",
            brush: "brushes",
            buffalo: "buffaloes",
            bureau: "bureaus",
            bus: "busses",
            cactus: "cacti",
            calf: "calves",
            chateau: "chateaux",
            cherry: "cherries",
            child: "children",
            church: "churches",
            circus: "circuses",
            cod: "cod",
            corps: "corps",
            corpus: "corpora",
            crisis: "crises",
            criterion: "criteria",
            curriculum: "curricula",
            datum: "data",
            deer: "deer",
            diagnosis: "diagnoses",
            die: "dice",
            domino: "dominoes",
            dwarf: "dwarves",
            echo: "echoes",
            elf: "elves",
            ellipsis: "ellipses",
            embargo: "embargoes",
            emphasis: "emphases",
            erratum: "errata",
            fax: "faxes",
            fireman: "firemen",
            fish: "fish",
            flush: "flushes",
            focus: "foci",
            foot: "feet",
            formula: "formulas",
            fungus: "fungi",
            genus: "genera",
            goose: "geese",
            grafito: "grafiti",
            half: "halves",
            hero: "heroes",
            hoax: "hoaxes",
            hoof: "hooves",
            hypothesis: "hypotheses",
            index: "indices",
            kiss: "kisses",
            knife: "knives",
            leaf: "leaves",
            life: "lives",
            loaf: "loaves",
            louse: "lice",
            man: "men",
            mango: "mangoes",
            matrix: "matrices",
            means: "means",
            medium: "media",
            memorandum: "memoranda",
            millennium: "milennia",
            moose: "moose",
            mosquito: "mosquitoes",
            motto: "mottoes",
            mouse: "mice",
            nebula: "nebulae",
            neurosis: "neuroses",
            nucleus: "nuclei",
            oasis: "oases",
            octopus: "octopodes",
            ovum: "ova",
            ox: "oxen",
            paralysis: "paralyses",
            parenthesis: "parentheses",
            person: "people",
            phenomenon: "phenomena",
            plateau: "plateaux",
            potato: "potatoes",
            quiz: "quizzes",
            radius: "radii",
            reflex: "reflexes",
            "runner-up": "runners-up",
            scampo: "scampi",
            scarf: "scarves",
            scissors: "scissors",
            scratch: "scratches",
            self: "selves",
            series: "series",
            sheaf: "sheaves",
            sheep: "sheep",
            shelf: "shelves",
            "son-in-law": "sons-in-law",
            species: "species",
            splash: "splashes",
            stimulus: "stimuli",
            stitch: "stitches",
            stratum: "strata",
            syllabus: "syllabi",
            symposium: "symposia",
            synopsis: "synopses",
            synthesis: "syntheses",
            tableau: "tableaux",
            tax: "taxes",
            that: "those",
            thesis: "theses",
            thief: "thieves",
            this: "these",
            tomato: "tomatoes",
            tooth: "teeth",
            tornado: "tornadoes",
            torpedo: "torpedoes",
            vertebra: "vertebrae",
            veto: "vetoes",
            vita: "vitae",
            volcano: "volcanoes",
            waltz: "waltzes",
            wash: "washes",
            watch: "watches",
            wharf: "wharves",
            wife: "wives",
            wolf: "wolves",
            woman: "women",
            zero: "zeroes",
        };
    }
    /**
     * @param {?} singularEntity
     * @param {?=} quantity
     * @return {?}
     */
    transform(singularEntity, quantity = 0) {
        if (!singularEntity || singularEntity === "") {
            return "";
        }
        if (quantity === 1) {
            return singularEntity;
        }
        else {
            const /** @type {?} */ lastWord = singularEntity.trim().split(" ")[singularEntity.trim().split(" ").length - 1];
            if (this.irregularMap[lastWord.toLocaleLowerCase()]) {
                if (lastWord[0] === lastWord[0].toLocaleUpperCase()) {
                    return singularEntity.replace(lastWord, this.irregularMap[lastWord.toLocaleLowerCase()].replace(this.irregularMap[lastWord.toLocaleLowerCase()][0], this.irregularMap[lastWord.toLocaleLowerCase()][0].toLocaleUpperCase()));
                }
                return singularEntity.replace(lastWord, this.irregularMap[lastWord.toLocaleLowerCase()]);
            }
            else if (lastWord[lastWord.length - 1] === "y") {
                // Naive approach:
                // consonant+y = word - 'y' +'ies'
                // vowel+y = word + 's'
                return isVowel(lastWord[lastWord.length - 2])
                    ? singularEntity + "s"
                    : singularEntity.replace(lastWord, lastWord.slice(0, -1) + "ies");
            }
            else if (lastWord[lastWord.length - 1] === "s") {
                return singularEntity + "es";
            }
            else {
                return singularEntity + "s";
            }
        }
    }
}
MakePluralStringPipe.decorators = [
    { type: Pipe, args: [{
                name: "make-plural-string",
            },] },
];
function MakePluralStringPipe_tsickle_Closure_declarations() {
    /** @type {?} */
    MakePluralStringPipe.prototype.irregularMap;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGx1cmFsaXplLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXBpcGVzLyIsInNvdXJjZXMiOlsic3JjL3BpcGVzL3N0cmluZy9wbHVyYWxpemUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxJQUFJLEVBQWlCLE1BQU0sZUFBZSxDQUFDO0FBQ3BELE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUU3Qzs7Ozs7Ozs7Ozs7O0FBZ0JBLE1BQU07OzRCQUN3QjtZQUMxQixRQUFRLEVBQUUsU0FBUztZQUNuQixJQUFJLEVBQUUsT0FBTztZQUNiLE1BQU0sRUFBRSxTQUFTO1lBQ2pCLE9BQU8sRUFBRSxRQUFRO1lBQ2pCLFFBQVEsRUFBRSxVQUFVO1lBQ3BCLE9BQU8sRUFBRSxVQUFVO1lBQ25CLFFBQVEsRUFBRSxZQUFZO1lBQ3RCLFFBQVEsRUFBRSxTQUFTO1lBQ25CLElBQUksRUFBRSxRQUFRO1lBQ2QsR0FBRyxFQUFFLE1BQU07WUFDWCxJQUFJLEVBQUUsTUFBTTtZQUNaLFFBQVEsRUFBRSxTQUFTO1lBQ25CLFNBQVMsRUFBRSxVQUFVO1lBQ3JCLEtBQUssRUFBRSxPQUFPO1lBQ2QsS0FBSyxFQUFFLFNBQVM7WUFDaEIsS0FBSyxFQUFFLFNBQVM7WUFDaEIsSUFBSSxFQUFFLE9BQU87WUFDYixLQUFLLEVBQUUsT0FBTztZQUNkLEtBQUssRUFBRSxTQUFTO1lBQ2hCLE9BQU8sRUFBRSxXQUFXO1lBQ3BCLE1BQU0sRUFBRSxTQUFTO1lBQ2pCLEdBQUcsRUFBRSxRQUFRO1lBQ2IsTUFBTSxFQUFFLE9BQU87WUFDZixJQUFJLEVBQUUsUUFBUTtZQUNkLE9BQU8sRUFBRSxVQUFVO1lBQ25CLE1BQU0sRUFBRSxVQUFVO1lBQ2xCLEtBQUssRUFBRSxVQUFVO1lBQ2pCLE1BQU0sRUFBRSxVQUFVO1lBQ2xCLE1BQU0sRUFBRSxVQUFVO1lBQ2xCLEdBQUcsRUFBRSxLQUFLO1lBQ1YsS0FBSyxFQUFFLE9BQU87WUFD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QkFDakQsTUFBTSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7YUFDOUI7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDTixNQUFNLENBQUMsY0FBYyxHQUFHLEdBQUcsQ0FBQzthQUM3QjtTQUNGO0tBQ0Y7OztZQWxNRixJQUFJLFNBQUM7Z0JBQ0osSUFBSSxFQUFFLG9CQUFvQjthQUMzQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBpcGUsIFBpcGVUcmFuc2Zvcm0gfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgaXNWb3dlbCB9IGZyb20gXCIuLi9oZWxwZXJzL2hlbHBlcnNcIjtcblxuQFBpcGUoe1xuICBuYW1lOiBcIm1ha2UtcGx1cmFsLXN0cmluZ1wiLFxufSlcblxuLyoqXG4gKiBUYWtlcyBhIHNpbmd1bGFyIGVudGl0eSBzdHJpbmcgYW5kIHBsdXJhbGl6ZXMgaXQuXG4gKiBVc2VzIGJvdGggbmFpdmUgYW5kIGhvbGRvdXQtbGlzdCBhcHByb2FjaGVzLlxuICogSWYgc2V2ZXJhbCB3b3JkcyBhcHBlYXIgaW4gdGhlIHN0cmluZywgb25seSB0aGUgbGFzdCB3b3JkIGlzIHBsdXJhbGl6ZWQgLS0gdGhpc1xuICogbWVhbnMgdGhhdCBpZiBcInlvdXIgc3RvcnlcIiB3YXMgcGFzc2VkIGluLCBcInlvdXIgc3Rvcmllc1wiIHdvdWxkIGJlIHBhc3NlZCBvdXQuXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBzaW5ndWxhckVudGl0eSAtIEVudGl0eSB0byBwbHVyYWxpemUuIFBhc3MgYXMgYSBzaW5ndWxhciAoJ3N0b3J5JyBvciAnaG91c2UnKS5cbiAqICAgICAgICAgIE5PVEU6IFRoZSBsYXN0IHdvcmQgaXMgZXhhbWluZWQuIFNvIHlvdSBjYW4gcGFzcyBpbiBlLmcuICdteSBzdG9yeScuXG4gKiBAcGFyYW0ge251bWJlcn0gW3F1YW50aXR5PTBdIHF1YW50aXR5IC0gSG93IG1hbnkgb2YgdGhlIGVudGl0eSBhcmUgdGhlcmU/IElmIGxlZnQgYmxhbmssIHRoaXMgd2lsbFxuICogICAgICAgICAgcGx1cmFsaXplIHRoZSBzdHJpbmcgKGUuZy4gJ3N0b3J5JyAtPiAnc3RvcmllcycsICdob3VzZScgLT4gJ2hvdXNlcycpLiBJZiBnaXZlbiBhIHZhbHVlLFxuICogICAgICAgICAgdGhpcyB3aWxsIHBsdXJhbGl6ZSBhcHByb3ByaWF0ZWx5IChlLmcuICgnc3RvcnknLCAxKSAtPiAnc3RvcnknLCAoJ3N0b3J5JywgMikgLT4gJ3N0b3JpZXMnKS5cbiAqL1xuZXhwb3J0IGNsYXNzIE1ha2VQbHVyYWxTdHJpbmdQaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XG4gIHByaXZhdGUgaXJyZWd1bGFyTWFwOiBhbnkgPSB7XG4gICAgYWRkZW5kdW06IFwiYWRkZW5kYVwiLFxuICAgIGFsZ2E6IFwiYWxnYWVcIixcbiAgICBhbHVtbmE6IFwiYWx1bW5hZVwiLFxuICAgIGFsdW1udXM6IFwiYWx1bW5pXCIsXG4gICAgYW5hbHlzaXM6IFwiYW5hbHlzZXNcIixcbiAgICBhbnRlbm5hOiBcImFudGVubmFlXCIsXG4gICAgYXBwZW5kaXg6IFwiYXBwZW5kaWNlc1wiLFxuICAgIGFxdWFyaXVtOiBcImFxdWFyaWFcIixcbiAgICBhcmNoOiBcImFyY2hlc1wiLFxuICAgIGF4ZTogXCJheGVzXCIsXG4gICAgYXhpczogXCJheGVzXCIsXG4gICAgYmFjaWxsdXM6IFwiYmFjaWxsaVwiLFxuICAgIGJhY3Rlcml1bTogXCJiYWN0ZXJpYVwiLFxuICAgIGJhc2lzOiBcImJhc2VzXCIsXG4gICAgYmF0Y2g6IFwiYmF0Y2hlc1wiLFxuICAgIGJlYWNoOiBcImJlYWNoZXNcIixcbiAgICBiZWF1OiBcImJlYXV4XCIsXG4gICAgYmlzb246IFwiYmlzb25cIixcbiAgICBicnVzaDogXCJicnVzaGVzXCIsXG4gICAgYnVmZmFsbzogXCJidWZmYWxvZXNcIixcbiAgICBidXJlYXU6IFwiYnVyZWF1c1wiLFxuICAgIGJ1czogXCJidXNzZXNcIixcbiAgICBjYWN0dXM6IFwiY2FjdGlcIixcbiAgICBjYWxmOiBcImNhbHZlc1wiLFxuICAgIGNoYXRlYXU6IFwiY2hhdGVhdXhcIixcbiAgICBjaGVycnk6IFwiY2hlcnJpZXNcIixcbiAgICBjaGlsZDogXCJjaGlsZHJlblwiLFxuICAgIGNodXJjaDogXCJjaHVyY2hlc1wiLFxuICAgIGNpcmN1czogXCJjaXJjdXNlc1wiLFxuICAgIGNvZDogXCJjb2RcIixcbiAgICBjb3JwczogXCJjb3Jwc1wiLFxuICAgIGNvcnB1czogXCJjb3Jwb3JhXCIsXG4gICAgY3Jpc2lzOiBcImNyaXNlc1wiLFxuICAgIGNyaXRlcmlvbjogXCJjcml0ZXJpYVwiLFxuICAgIGN1cnJpY3VsdW06IFwiY3VycmljdWxhXCIsXG4gICAgZGF0dW06IFwiZGF0YVwiLFxuICAgIGRlZXI6IFwiZGVlclwiLFxuICAgIGRpYWdub3NpczogXCJkaWFnbm9zZXNcIixcbiAgICBkaWU6IFwiZGljZVwiLFxuICAgIGRvbWlubzogXCJkb21pbm9lc1wiLFxuICAgIGR3YXJmOiBcImR3YXJ2ZXNcIixcbiAgICBlY2hvOiBcImVjaG9lc1wiLFxuICAgIGVsZjogXCJlbHZlc1wiLFxuICAgIGVsbGlwc2lzOiBcImVsbGlwc2VzXCIsXG4gICAgZW1iYXJnbzogXCJlbWJhcmdvZXNcIixcbiAgICBlbXBoYXNpczogXCJlbXBoYXNlc1wiLFxuICAgIGVycmF0dW06IFwiZXJyYXRhXCIsXG4gICAgZmF4OiBcImZheGVzXCIsXG4gICAgZmlyZW1hbjogXCJmaXJlbWVuXCIsXG4gICAgZmlzaDogXCJmaXNoXCIsXG4gICAgZmx1c2g6IFwiZmx1c2hlc1wiLFxuICAgIGZvY3VzOiBcImZvY2lcIixcbiAgICBmb290OiBcImZlZXRcIixcbiAgICBmb3JtdWxhOiBcImZvcm11bGFzXCIsXG4gICAgZnVuZ3VzOiBcImZ1bmdpXCIsXG4gICAgZ2VudXM6IFwiZ2VuZXJhXCIsXG4gICAgZ29vc2U6IFwiZ2Vlc2VcIixcbiAgICBncmFmaXRvOiBcImdyYWZpdGlcIixcbiAgICBoYWxmOiBcImhhbHZlc1wiLFxuICAgIGhlcm86IFwiaGVyb2VzXCIsXG4gICAgaG9heDogXCJob2F4ZXNcIixcbiAgICBob29mOiBcImhvb3Zlc1wiLFxuICAgIGh5cG90aGVzaXM6IFwiaHlwb3RoZXNlc1wiLFxuICAgIGluZGV4OiBcImluZGljZXNcIixcbiAgICBraXNzOiBcImtpc3Nlc1wiLFxuICAgIGtuaWZlOiBcImtuaXZlc1wiLFxuICAgIGxlYWY6IFwibGVhdmVzXCIsXG4gICAgbGlmZTogXCJsaXZlc1wiLFxuICAgIGxvYWY6IFwibG9hdmVzXCIsXG4gICAgbG91c2U6IFwibGljZVwiLFxuICAgIG1hbjogXCJtZW5cIixcbiAgICBtYW5nbzogXCJtYW5nb2VzXCIsXG4gICAgbWF0cml4OiBcIm1hdHJpY2VzXCIsXG4gICAgbWVhbnM6IFwibWVhbnNcIixcbiAgICBtZWRpdW06IFwibWVkaWFcIixcbiAgICBtZW1vcmFuZHVtOiBcIm1lbW9yYW5kYVwiLFxuICAgIG1pbGxlbm5pdW06IFwibWlsZW5uaWFcIixcbiAgICBtb29zZTogXCJtb29zZVwiLFxuICAgIG1vc3F1aXRvOiBcIm1vc3F1aXRvZXNcIixcbiAgICBtb3R0bzogXCJtb3R0b2VzXCIsXG4gICAgbW91c2U6IFwibWljZVwiLFxuICAgIG5lYnVsYTogXCJuZWJ1bGFlXCIsXG4gICAgbmV1cm9zaXM6IFwibmV1cm9zZXNcIixcbiAgICBudWNsZXVzOiBcIm51Y2xlaVwiLFxuICAgIG9hc2lzOiBcIm9hc2VzXCIsXG4gICAgb2N0b3B1czogXCJvY3RvcG9kZXNcIixcbiAgICBvdnVtOiBcIm92YVwiLFxuICAgIG94OiBcIm94ZW5cIixcbiAgICBwYXJhbHlzaXM6IFwicGFyYWx5c2VzXCIsXG4gICAgcGFyZW50aGVzaXM6IFwicGFyZW50aGVzZXNcIixcbiAgICBwZXJzb246IFwicGVvcGxlXCIsXG4gICAgcGhlbm9tZW5vbjogXCJwaGVub21lbmFcIixcbiAgICBwbGF0ZWF1OiBcInBsYXRlYXV4XCIsXG4gICAgcG90YXRvOiBcInBvdGF0b2VzXCIsXG4gICAgcXVpejogXCJxdWl6emVzXCIsXG4gICAgcmFkaXVzOiBcInJhZGlpXCIsXG4gICAgcmVmbGV4OiBcInJlZmxleGVzXCIsXG4gICAgXCJydW5uZXItdXBcIjogXCJydW5uZXJzLXVwXCIsXG4gICAgc2NhbXBvOiBcInNjYW1waVwiLFxuICAgIHNjYXJmOiBcInNjYXJ2ZXNcIixcbiAgICBzY2lzc29yczogXCJzY2lzc29yc1wiLFxuICAgIHNjcmF0Y2g6IFwic2NyYXRjaGVzXCIsXG4gICAgc2VsZjogXCJzZWx2ZXNcIixcbiAgICBzZXJpZXM6IFwic2VyaWVzXCIsXG4gICAgc2hlYWY6IFwic2hlYXZlc1wiLFxuICAgIHNoZWVwOiBcInNoZWVwXCIsXG4gICAgc2hlbGY6IFwic2hlbHZlc1wiLFxuICAgIFwic29uLWluLWxhd1wiOiBcInNvbnMtaW4tbGF3XCIsXG4gICAgc3BlY2llczogXCJzcGVjaWVzXCIsXG4gICAgc3BsYXNoOiBcInNwbGFzaGVzXCIsXG4gICAgc3RpbXVsdXM6IFwic3RpbXVsaVwiLFxuICAgIHN0aXRjaDogXCJzdGl0Y2hlc1wiLFxuICAgIHN0cmF0dW06IFwic3RyYXRhXCIsXG4gICAgc3lsbGFidXM6IFwic3lsbGFiaVwiLFxuICAgIHN5bXBvc2l1bTogXCJzeW1wb3NpYVwiLFxuICAgIHN5bm9wc2lzOiBcInN5bm9wc2VzXCIsXG4gICAgc3ludGhlc2lzOiBcInN5bnRoZXNlc1wiLFxuICAgIHRhYmxlYXU6IFwidGFibGVhdXhcIixcbiAgICB0YXg6IFwidGF4ZXNcIixcbiAgICB0aGF0OiBcInRob3NlXCIsXG4gICAgdGhlc2lzOiBcInRoZXNlc1wiLFxuICAgIHRoaWVmOiBcInRoaWV2ZXNcIixcbiAgICB0aGlzOiBcInRoZXNlXCIsXG4gICAgdG9tYXRvOiBcInRvbWF0b2VzXCIsXG4gICAgdG9vdGg6IFwidGVldGhcIixcbiAgICB0b3JuYWRvOiBcInRvcm5hZG9lc1wiLFxuICAgIHRvcnBlZG86IFwidG9ycGVkb2VzXCIsXG4gICAgdmVydGVicmE6IFwidmVydGVicmFlXCIsXG4gICAgdmV0bzogXCJ2ZXRvZXNcIixcbiAgICB2aXRhOiBcInZpdGFlXCIsXG4gICAgdm9sY2FubzogXCJ2b2xjYW5vZXNcIixcbiAgICB3YWx0ejogXCJ3YWx0emVzXCIsXG4gICAgd2FzaDogXCJ3YXNoZXNcIixcbiAgICB3YXRjaDogXCJ3YXRjaGVzXCIsXG4gICAgd2hhcmY6IFwid2hhcnZlc1wiLFxuICAgIHdpZmU6IFwid2l2ZXNcIixcbiAgICB3b2xmOiBcIndvbHZlc1wiLFxuICAgIHdvbWFuOiBcIndvbWVuXCIsXG4gICAgemVybzogXCJ6ZXJvZXNcIixcbiAgfTtcblxuICB0cmFuc2Zvcm0oc2luZ3VsYXJFbnRpdHk6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlciA9IDApOiBzdHJpbmcge1xuICAgIGlmICghc2luZ3VsYXJFbnRpdHkgfHwgc2luZ3VsYXJFbnRpdHkgPT09IFwiXCIpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cblxuICAgIGlmIChxdWFudGl0eSA9PT0gMSkge1xuICAgICAgcmV0dXJuIHNpbmd1bGFyRW50aXR5O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBsYXN0V29yZCA9IHNpbmd1bGFyRW50aXR5LnRyaW0oKS5zcGxpdChcIiBcIilbc2luZ3VsYXJFbnRpdHkudHJpbSgpLnNwbGl0KFwiIFwiKS5sZW5ndGggLSAxXTtcbiAgICAgIGlmICh0aGlzLmlycmVndWxhck1hcFtsYXN0V29yZC50b0xvY2FsZUxvd2VyQ2FzZSgpXSkge1xuICAgICAgICBpZiAobGFzdFdvcmRbMF0gPT09IGxhc3RXb3JkWzBdLnRvTG9jYWxlVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICByZXR1cm4gc2luZ3VsYXJFbnRpdHkucmVwbGFjZShcbiAgICAgICAgICAgIGxhc3RXb3JkLFxuICAgICAgICAgICAgdGhpcy5pcnJlZ3VsYXJNYXBbbGFzdFdvcmQudG9Mb2NhbGVMb3dlckNhc2UoKV0ucmVwbGFjZShcbiAgICAgICAgICAgICAgdGhpcy5pcnJlZ3VsYXJNYXBbbGFzdFdvcmQudG9Mb2NhbGVMb3dlckNhc2UoKV1bMF0sXG4gICAgICAgICAgICAgIHRoaXMuaXJyZWd1bGFyTWFwW2xhc3RXb3JkLnRvTG9jYWxlTG93ZXJDYXNlKCldWzBdLnRvTG9jYWxlVXBwZXJDYXNlKClcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNpbmd1bGFyRW50aXR5LnJlcGxhY2UobGFzdFdvcmQsIHRoaXMuaXJyZWd1bGFyTWFwW2xhc3RXb3JkLnRvTG9jYWxlTG93ZXJDYXNlKCldKTtcbiAgICAgIH0gZWxzZSBpZiAobGFzdFdvcmRbbGFzdFdvcmQubGVuZ3RoIC0gMV0gPT09IFwieVwiKSB7XG4gICAgICAgIC8vIE5haXZlIGFwcHJvYWNoOlxuICAgICAgICAvLyBjb25zb25hbnQreSA9IHdvcmQgLSAneScgKydpZXMnXG4gICAgICAgIC8vIHZvd2VsK3kgPSB3b3JkICsgJ3MnXG5cbiAgICAgICAgcmV0dXJuIGlzVm93ZWwobGFzdFdvcmRbbGFzdFdvcmQubGVuZ3RoIC0gMl0pXG4gICAgICAgICAgPyBzaW5ndWxhckVudGl0eSArIFwic1wiXG4gICAgICAgICAgOiBzaW5ndWxhckVudGl0eS5yZXBsYWNlKGxhc3RXb3JkLCBsYXN0V29yZC5zbGljZSgwLCAtMSkgKyBcImllc1wiKTtcbiAgICAgIH0gZWxzZSBpZiAobGFzdFdvcmRbbGFzdFdvcmQubGVuZ3RoIC0gMV0gPT09IFwic1wiKSB7XG4gICAgICAgIHJldHVybiBzaW5ndWxhckVudGl0eSArIFwiZXNcIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBzaW5ndWxhckVudGl0eSArIFwic1wiO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19